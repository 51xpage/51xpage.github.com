---
layout: post
title: "道听途说mac系统5 - vi使用技巧"
description: "mac下vi使用技巧"
category: "mac"
modified: 2015-05-26 11:22
tags: "mac vi"
---
{% include JB/setup %}

## Mac Vi使用

## 1、模式切换

* ESC 回到查看专题
* i 进入编辑模式
* v 进入Visual模式，好像就是通过上下键行选择

## 2、保存退出

在查看模式下，输入 

* :w (保存)
* :q (退出)

可以组合

* :wq(保存退出)

如果遇到需要强制退出的，比如修改了内容，不想保存，就在后面加感叹号
* :q!

## 3、复制粘贴
在查看模式下，直接敲 yy 或者 yyn   n表示要复制的行数
在需要粘贴的地方，敲p，直接就粘贴过来了

## 4、定位
查看模式下

* 文件末端   大写G
* 第一行  :1或gg
* 指定行   :n 行号
* 行首    Fn + 左 /^ 
* 行尾	  Fn + 右 /$
* 页居中		M
* 光标移动  hjkl移动光标

## 5、缩进
在visual状态下，用 <或者 >可以缩进，不过好像只能缩进一次

根据语言缩进

* n==  n表示行数，可以没有，就直接等号
* gg=G 整篇代码排版

## 6、撤销重做
* u/:undo
* :redo/CTRL + R
* :undolist

## 7、翻页

* Ctrl+f和Ctrl+b是上下翻页。
* Ctrl+u和Ctrl+d是上下翻半页。

## 8、查找替换
在非编辑状态下，输入命令

	%s/原始字符串/替换字符串/g

这里  

* 最开始的%s是限定范围，表示整个文件，常用限定条件
	* s. 表示当前行
	* n,$s. 第n行——最后
	* %. 全局
* 最后的g是全局的意思，限定范围的全局替换。
	如果不加，就只替换第一个符合的字符串

如果没有后面的替换字符串，就仅仅是查找


在VIM中进行文本替换：

    1.  替换当前行中的内容：    :s/from/to/    （s即substitude）
        :s/from/to/     ：  将当前行中的第一个from，替换成to。如果当前行含有多个
                            from，则只会替换其中的第一个。
        :s/from/to/g    ：  将当前行中的所有from都替换成to。
        :s/from/to/gc   ：  将当前行中的所有from都替换成to，但是每一次替换之前都
                            会询问请求用户确认此操作。

        注意：这里的from和to都可以是任何字符串，其中from还可以是正则表达式。

    2.  替换某一行的内容：      :33s/from/to/g
        :.s/from/to/g   ：  在当前行进行替换操作。
        :33s/from/to/g  ：  在第33行进行替换操作。
        :$s/from/to/g   ：  在最后一行进行替换操作。

    3.  替换某些行的内容：      :10,20s/from/to/g
        :10,20s/from/to/g   ：  对第10行到第20行的内容进行替换。
        :1,$s/from/to/g     ：  对第一行到最后一行的内容进行替换（即全部文本）。
        :1,.s/from/to/g     ：  对第一行到当前行的内容进行替换。
        :.,$s/from/to/g     ：  对当前行到最后一行的内容进行替换。
        :'a,'bs/from/to/g   ：  对标记a和b之间的行（含a和b所在的行）进行替换。
                                其中a和b是之前用m命令所做的标记。

    4.  替换所有行的内容：      :%s/from/to/g
        :%s/from/to/g   ：  对所有行的内容进行替换。

    5.  替换命令的完整形式：    :[range]s/from/to/[flags]
        5.1 s/from/to/
            把from指定的字符串替换成to指定的字符串，from可以是正则表达式。
        5.2 [range]
            有以下一些表示方法：
            不写range   ：  默认为光标所在的行。
            .           ：  光标所在的行。
            1           ：  第一行。
            $           ：  最后一行。
            33          ：  第33行。
            'a          ：  标记a所在的行（之前要使用ma做过标记）。
            .+1         ：  当前光标所在行的下面一行。
            $-1         ：  倒数第二行。（这里说明我们可以对某一行加减某个数值来
                            取得相对的行）。
            22,33       ：  第22～33行。
            1,$         ：  第1行 到 最后一行。
            1,.         ：  第1行 到 当前行。
            .,$         ：  当前行 到 最后一行。
            'a,'b       ：  标记a所在的行 到 标记b所在的行。

            %           ：  所有行（与 1,$ 等价）。

            ?chapter?   ：  从当前位置向上搜索，找到的第一个chapter所在的行。（
                            其中chapter可以是任何字符串或者正则表达式。
            /chapter/   ：  从当前位置向下搜索，找到的第一个chapter所在的行。（
                            其中chapter可以是任何字符串或者正则表达式。

            注意，上面的所有用于range的表示方法都可以通过 +、- 操作来设置相对偏
            移量。

        5.3 [flags]
            这里可用的flags有：

            无      ：  只对指定范围内的第一个匹配项进行替换。
            g       ：  对指定范围内的所有匹配项进行替换。
            c       ：  在替换前请求用户确认。
            e       ：  忽略执行过程中的错误。

            注意：上面的所有flags都可以组合起来使用，比如 gc 表示对指定范围内的
            所有匹配项进行替换，并且在每一次替换之前都会请用户确认。